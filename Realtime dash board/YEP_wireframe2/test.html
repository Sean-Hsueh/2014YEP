<!doctype html>
<html class="no-js" lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>IBM YEP 一起遊世界 2014</title>
  <meta name="description" content="">
  <meta name="keywords" content="">
  <meta name="author" content="">
  <link rel="shortcut icon" href="images/favicon.ico">

  <!-- Google Fonts -->
  <link href='http://fonts.googleapis.com/css?family=Ruda:400,900,700' rel='stylesheet' type='text/css'>

  <!-- Font Awesome -->
  <link rel="stylesheet" href="css/font-awesome.css">
  <!-- Bootstrap -->
  <link href="assets/css/bootstrap.css" rel="stylesheet">
  <!-- Template Styles -->
  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="css/colors/blue.css">
  <!-- Layer Slider -->
  <link rel="stylesheet" href="layerslider/css/layerslider.css" type="text/css">


  <!-- Support for HTML5 -->
  <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->

  <!-- Enable media queries on older browsers -->
  <!--[if lt IE 9]>
    <script src="assets/js/respond.min.js"></script>
  <![endif]-->

  <script src="js/modernizr.js"></script>
</head>
<body>
  <div class="topbar clearfix">
    <div class="container">
    <div class="col-lg-12 text-right">
              <div class="social_buttons">
                  <h4>2014/12/12 19:00</h4><!--To Sean: 請將時間代換為現在時間-->
              </div>
    </div>
    </div><!-- end container -->
  </div><!-- end topbar -->

  <header class="header">
    <div class="container">
      <div id="nav" class="right">
      <div class="site-header clearfix">
        <div class="col-lg-3 col-md-3 col-sm-12 title-area">
          <div class="site-title" id="title">
              <h3>IBM航空<span>塔臺最新資訊</span></h3>
            </a>
          </div>
        </div>
        <div class="col-lg-3 col-md-3 col-sm-12 title-area">
        </div>
        <div class="col-lg-6 col-md-12 col-sm-12">
           <div id="nav" class="right">
                <div class="container clearfix">
                  <div class="showback">
                    <div class="progress progress-striped active">
                      <div class="progress-bar"  role="progressbar" aria-valuenow="45" aria-valuemin="0" aria-valuemax="100" style="width: 45%"><!--To Sean: 請將width代換為參數-->
                      </div>
                    </div>
                    <h4>登機人數：1500/2000</h4><!--To Sean: 請將1500、2000分別代換為參數-->

                  </div>
                </div>
            </div>
        </div>

      </div>
    </div>
    </div>
  </header>

  <div class="clearfix"></div>
  <div class="divider"></div>

  <div class="container">

    <div class="general-title text-center">
      <h3>各洲登機狀況</h3>
    </div>

    <div class="skills text-center">
      <div class="col-lg-3 col-md-3 col-sm-6 col-xs-12">
        <span class="chart" id="chart_af" data-percent="90">
          <span class="percent"></span>
        </span>
        <h4 class="title">非洲</h4>
      </div>
      <div class="col-lg-3 col-md-3 col-sm-6 col-xs-12">
        <span class="chart"  id="chart_us" data-percent="75">
          <span class="percent"></span>
        </span>
        <h4 class="title">美洲</h4>
      </div>
      <div class="col-lg-3 col-md-3 col-sm-6 col-xs-12">
        <span class="chart"  id="chart_au" data-percent="65">
          <span class="percent"></span>
        </span>
        <h4 class="title">大洋洲</h4>
      </div>
      <div class="col-lg-3 col-md-3 col-sm-6 col-xs-12">
        <span class="chart"  id="chart_eu" data-percent="80">
          <span class="percent"></span>
        </span>
        <h4 class="title">歐洲</h4>
      </div>
    </div>
  </div>

  <div class="clearfix"></div>
  <div class="divider"></div>

    <section class="section1">
      <div class="container clearfix">
      <div class="content col-lg-12 col-md-12 col-sm-12 clearfix">

        <div id="bbpress-forums">
            <ul class="bbp-forums">
                <li class="bbp-header">
                    <ul class="forum-titles">

                        <li class="bbp-forum-info">登機乘客</li>
                        <li class="bbp-forum-reply-count"></li>
                        <li class="bbp-forum-topic-count"></li>
                        <li class="bbp-forum-topic-count"></li>
                        <li class="bbp-forum-topic-count"></li>
                    </ul>
                </li><!-- .bbp-header -->

                <li class="bbp-body" id="checkin1">
                    <ul class="forum type-forum status-publish hentry loop-item-0 odd bbp-forum-status-open bbp-forum-visibility-publish">
                        <li class="bbp-forum-info">
                            <a class="bbp-forum-title" href="#" title="General">Cynthia Liu</a>
                        </li>
                        <li class="bbp-forum-reply-count">美</li>
                        <li class="bbp-forum-topic-count">GBS</li>
                        <li class="bbp-forum-reply-count">1人</li>
                        <li class="bbp-forum-topic-count">18:34</li>
                    </ul>
                 </li>
                 <li class="bbp-body" id="checkin2">
                     <ul class="forum type-forum status-publish hentry loop-item-0 odd bbp-forum-status-open bbp-forum-visibility-publish">
                         <li class="bbp-forum-info">
                             <a class="bbp-forum-title" href="#" title="General">Rita Wang</a>
                         </li>
                         <li class="bbp-forum-reply-count">歐</li>
                         <li class="bbp-forum-topic-count">ISC</li>
                         <li class="bbp-forum-reply-count">2人</li>
                         <li class="bbp-forum-topic-count">18:29</li>
                     </ul>
                  </li>
                  <li class="bbp-body" id="checkin3">
                      <ul class="forum type-forum status-publish hentry loop-item-0 odd bbp-forum-status-open bbp-forum-visibility-publish">
                          <li class="bbp-forum-info">
                              <a class="bbp-forum-title" href="#" title="General">Chiwen Chang</a>
                          </li>
                          <li class="bbp-forum-reply-count">澳</li>
                          <li class="bbp-forum-topic-count">GTS</li>
                          <li class="bbp-forum-reply-count">1人</li>
                          <li class="bbp-forum-topic-count">18:28</li>
                      </ul>
                   </li>
                   <li class="bbp-body" id="checkin4">
                       <ul class="forum type-forum status-publish hentry loop-item-0 odd bbp-forum-status-open bbp-forum-visibility-publish">
                           <li class="bbp-forum-info">
                               <a class="bbp-forum-title" href="#" title="General">Sean Hsueh</a>
                           </li>
                           <li class="bbp-forum-reply-count">非</li>
                           <li class="bbp-forum-topic-count">MKT</li>
                           <li class="bbp-forum-reply-count">3人</li>
                           <li class="bbp-forum-topic-count">18:24</li>
                       </ul>
                    </li>
                    <li class="bbp-body" id="checkin5">
                        <ul class="forum type-forum status-publish hentry loop-item-0 odd bbp-forum-status-open bbp-forum-visibility-publish">
                            <li class="bbp-forum-info">
                                <a class="bbp-forum-title" href="#" title="General">Sherwood Hochen</a>
                            </li>
                            <li class="bbp-forum-reply-count">歐</li>
                            <li class="bbp-forum-topic-count">SALES</li>
                            <li class="bbp-forum-reply-count">1人</li>
                            <li class="bbp-forum-topic-count">18:20</li>
                        </ul>
                     </li>
                  </ul><!-- .forums-directory -->
                </div> <!-- /bbpress -->
        </div><!-- end content -->
    </div><!-- end container -->
  </section><!-- end section -->

  <div class="footer">
    <div class="container">
      <div class="col-lg-12 col-md-12 col-sm-12 columns">
        <p>Copyright © 2014 - All rights reserved. Designed by  <a title="Bootstrap Themes" href="mailto:eri.d.studio@gmail.com">Sean Hsueh (艾芮工作室)</a> and <a title="Bootstrap Themes" href="http://tw.linkuriosity.com">Rita Wang (LINKuriosity集資開課平台)</a></p>
      </div><!-- end widget -->
    </div><!-- end container -->
  </div><!-- end copyrights -->
  <div class="dmtop">Scroll to Top</div>



      <!-- Main Scripts-->
  <script src="assets/js/jquery.js"></script>
  <script src="assets/js/bootstrap.min.js"></script>
    <script src="assets/js/jquery.unveilEffects.js"></script>
  <script src="js/retina-1.1.0.js"></script>
  <script src="js/jquery.hoverex.min.js"></script>
    <script src="js/jetmenu.js"></script>
  <script src="js/jquery.jigowatt.js"></script>
  <script src="js/jquery.animate-enhanced.min.js"></script>
  <script src="js/jquery.easypiechart.min.js"></script>
  <script src="js/custom.js"></script>
    <script>
  // Chart Effects;
    $('.chart').easyPieChart({
      easing: 'easeOutBounce',
      size : 180,
      animate : 2000,
      lineWidth : 10,
      lineCap : 'square',
      lineWidth : 18,
      barColor : '#3498db',
      trackColor : '#f9f9f9',
      scaleColor : false,
      onStep: function(from, to, percent) {
      $(this.el).find('.percent').text(Math.round(percent)+'%');
      }
    });
    
    
function executeQuery() {

    var json_result;
    $.get("http://162.222.179.179:8083/results",function(data,status){
        json_result = $.parseJSON(data)
        
        var af_detail_dict = {}
        var us_detail_dict = {}
        var au_detail_dict = {}
        var eu_detail_dict = {}
        
        var total_people = { 'af':100, 'us':100, 'au':100, 'eu':100 }
        var arrived_people = { 'af':0, 'us':0, 'au':0, 'eu':0 }
        
        $.each(json_result, function(key, value) {
            if (value != null){
            
                if (value["目的地"] == "非洲"){
                    af_detail_dict[key] = value
                    arrived_people['af'] += parseInt(value["總人數"])
                }
                else if (value["目的地"] == "美洲"){
                    us_detail_dict[key] = value
                    arrived_people['us'] += parseInt(value["總人數"])
                }
                else if (value["目的地"] == "大洋洲"){
                    au_detail_dict[key] = value
                    arrived_people['au'] += parseInt(value["總人數"])
                }
                else if (value["目的地"] == "歐洲"){
                    eu_detail_dict[key] = value
                    arrived_people['eu'] += parseInt(value["總人數"])
                }
                
            }
        })
    
        alert(parseFloat(arrived_people['af']) / parseFloat(total_people['af']) * 100);
        
        setTimeout(function() {
            $("#chart_af").data('easyPieChart').update(parseFloat(arrived_people['af']) / parseFloat(total_people['af']) * 100);
            $("#chart_us").data('easyPieChart').update(parseFloat(arrived_people['us']) / parseFloat(total_people['us']) * 100);
            $("#chart_au").data('easyPieChart').update(parseFloat(arrived_people['au']) / parseFloat(total_people['au']) * 100);
            $("#chart_eu").data('easyPieChart').update(parseFloat(arrived_people['eu']) / parseFloat(total_people['eu']) * 100);
        }, 3000);

    });

  setTimeout(executeQuery, 5000); // you could choose not to continue on failure...
}

$(document).ready(function() {
  // run the first time; all subsequent calls will take care of themselves
  setTimeout(executeQuery, 1000);
}); 
  </script>
  </body>
</html>

